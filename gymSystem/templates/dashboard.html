{%extends "base.html"%} {% block title %} User Dashboard {% endblock title %}
{%block content %}

<header
  id="header"
  class="header d-flex align-items-center fixed-top"
  style="
    background: linear-gradient(to right, rgb(29, 20, 38), rgb(0, 33, 91));
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    padding: 1rem 2rem;
    z-index: 1000;
  "
>
  <div
    class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between"
  >
    <a href="/" class="logo d-flex align-items-center text-decoration-none">
      <h1
        class="sitename text-white fw-bold"
        style="font-size: 1.8rem; letter-spacing: 0.1rem"
      >
        Dashboard
      </h1>
    </a>
    <nav id="navmenu" class="navmenu">
      <ul class="d-flex align-items-center m-0" style="list-style: none">
        <li class="mx-3">
          <a
            href="#profile"
            class="text-white text-uppercase fw-bold"
            style="
              text-decoration: none;
              transition: color 0.3s ease;
              font-size: 1rem;
            "
          >
            Profile
          </a>
        </li>
        <li class="mx-3">
          <a
            href="#attendance"
            class="text-white text-uppercase fw-bold"
            style="
              text-decoration: none;
              transition: color 0.3s ease;
              font-size: 1rem;
            "
          >
            Attendance
          </a>
        </li>
        <li class="mx-3">
          <a
            href="#classes"
            class="text-white text-uppercase fw-bold"
            style="
              text-decoration: none;
              transition: color 0.3s ease;
              font-size: 1rem;
            "
          >
            Classes
          </a>
        </li>
        <li class="mx-3">
          <a
            href="/gallery"
            class="text-white text-uppercase fw-bold"
            style="
              text-decoration: none;
              transition: color 0.3s ease;
              font-size: 1rem;
            "
          >
            Your Gallery
          </a>
        </li>
        <li class="mx-3">
          <a
            href="#subplan"
            class="text-white text-uppercase fw-bold"
            style="
              text-decoration: none;
              transition: color 0.3s ease;
              font-size: 1rem;
            "
          >
            Subscription Plan
          </a>
        </li>
        <li class="ms-3">
          <form action="{% url 'logout' %}" method="post" class="d-inline">
            {% csrf_token %}
            <button
              class="btn btn-light btn-sm fw-bold"
              type="submit"
              style="
                background: linear-gradient(
                  to right,
                  rgb(0, 0, 0),
                  rgb(16, 0, 52)
                );
                border: none;
                color: white;
                padding: 0.8rem 1rem;
                border-radius: 5px;
                transition: background 0.3s ease, transform 0.2s ease;
              "
            >
              Log Out
            </button>
          </form>
        </li>
      </ul>
    </nav>
  </div>
</header>

<main
  id="main"
  style="
    background: radial-gradient(
      circle,
      rgba(63, 94, 251, 1) 0%,
      rgba(121, 20, 41, 1) 100%
    );
    padding-top: 5rem;
  "
>
  <section
    id="profile"
    class="profile-section py-2"
    style="
      background: #f8f9fa;
      border-radius: 10px;
      margin: 2rem auto;
      max-width: 1200px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    "
  >
    <div class="container">
      <div class="row g-0">
        <div
          class="col-md-4 d-flex align-items-center justify-content-center"
          style="padding: 1rem"
        >
          <img
            src="static/assets/img/blog/user.png"
            class="img-fluid rounded-circle me-3"
            alt="User Profile Picture"
            style="width: 50px; height: 50px; object-fit: cover"
          />
          <h5 class="card-title text-muted mb-0">
            Welcome, <span class="text-primary">{{ user.username }}</span>
          </h5>
        </div>

        <div
          class="col-md-4 d-flex align-items-center justify-content-center"
          style="padding: 1rem"
        >
          <img
            src="static/assets/img/email.png"
            class="img-fluid rounded-circle me-3"
            alt="User Profile Picture"
            style="width: 50px; height: 50px; object-fit: cover"
          />
          <h5 class="card-text text-muted mb-0">
            <span class="text-primary">{{ user.email }}</span>
          </h5>
        </div>

        <a
          href="{% url 'password_change' %}"
          class="col-md-4 text-center d-flex align-items-center justify-content-center"
          style="
            text-decoration: none;
            background-color: rgb(68, 68, 68);
            border-radius: 10px;
            transition: background 0.3s ease, color 0.3s ease;
          "
          onmouseover="this.style.background='gray'; this.style.color='white';"
          onmouseout="this.style.background='rgb(159, 152, 152)'; this.style.color='';"
        >
          <div class="d-flex align-items-center">
            <img
              src="static/assets/img/password.png"
              class="img-fluid rounded-circle me-2"
              alt="User Profile Picture"
              style="width: 50px; height: 50px; object-fit: cover"
            />
            <span class="text-white">Reset Password</span>
          </div>
        </a>
      </div>
    </div>
  </section>

  <section
    id="attendance"
    class="py-4"
    style="
      background: #ffffff;
      border-radius: 10px;
      margin: 2rem auto;
      max-width: 1200px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      font-family: 'poppins', sans-serif;
    "
  >
    <div class="container">
      <div class="text-center mb-4">
        <h5
          class="text-dark text-uppercase fw-bold"
          style="font-size: 2rem; letter-spacing: 0.1rem"
        >
          Attendance Record
        </h5>
      </div>
      <div class="table-responsive">
        <table
          class="table table-bordered table-hover"
          style="
            border-collapse: separate;
            border-spacing: 0;
            background: #f8f9fa;
            border-radius: 10px;
            overflow: hidden;
          "
        >
          <thead
            class="table-dark"
            style="
              background: linear-gradient(to right, #6a11cb, #2575fc);
              color: white;
              font-weight: bold;
            "
          >
            <tr>
              <th style="padding: 1rem; text-align: center">Date</th>
              <th style="padding: 1rem; text-align: center">Login Time</th>
              <th style="padding: 1rem; text-align: center">Logout Time</th>
              <th style="padding: 1rem; text-align: center">Workout</th>
              <th style="padding: 1rem; text-align: center">Trained By</th>
            </tr>
          </thead>
          <tbody>
            {% for x in attendance_records %}
            <tr
              style="transition: background 0.3s ease"
              onmouseover="this.style.background='#e9ecef';"
              onmouseout="this.style.background='';"
            >
              <td style="padding: 1rem; text-align: center">
                {{ x.selectdate }}
              </td>
              <td style="padding: 1rem; text-align: center">{{ x.login }}</td>
              <td style="padding: 1rem; text-align: center">{{ x.logout }}</td>
              <td style="padding: 1rem; text-align: center">
                {{ x.selectworkout }}
              </td>
              <td style="padding: 1rem; text-align: center">
                {{ x.trainedby }}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div class="text-center mt-3">
        <a
          href="/attendance"
          class="btn btn-primary"
          style="
            background: linear-gradient(to right, #6a11cb, #2575fc);
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            font-family: 'poppins', sans-serif;
            transition: background 0.3s ease, transform 0.2s ease;
          "
          onmouseover="this.style.background='linear-gradient(to right, #2575fc, #6a11cb)'; this.style.transform='scale(1.05)';"
          onmouseout="this.style.background='linear-gradient(to right, #6a11cb, #2575fc)'; this.style.transform='scale(1)';"
        >
          Mark Attendance
        </a>
      </div>
    </div>
  </section>

  <section
    id="classes"
    class="py-4"
    style="
      background: #ffffff;
      border-radius: 10px;
      margin: 2rem auto;
      max-width: 1200px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      font-family: 'poppins', sans-serif;
    "
  >
    <div class="container">
      <h2
        class="text-center text-dark mb-4"
        style="font-size: 2rem; font-weight: bold; letter-spacing: 0.1rem"
      >
        Your Booked Sessions
      </h2>
      {% if user_bookings %}
      <div class="table-responsive">
        <table
          class="table table-bordered table-hover"
          style="
            border-collapse: separate;
            border-spacing: 0;
            background: #f8f9fa;
            border-radius: 10px;
            overflow: hidden;
          "
        >
          <thead
            class="table-dark"
            style="
              background: linear-gradient(to right, #6a11cb, #2575fc);
              color: white;
              font-weight: bold;
            "
          >
            <tr>
              <th style="padding: 1rem; text-align: center">Session Name</th>
              <th style="padding: 1rem; text-align: center">From</th>
              <th style="padding: 1rem; text-align: center">To</th>
              <th style="padding: 1rem; text-align: center">Trainer</th>
              <th style="padding: 1rem; text-align: center">Booking Date</th>
            </tr>
          </thead>
          <tbody>
            {% for booking in user_bookings %}
            <tr
              style="transition: background 0.3s ease"
              onmouseover="this.style.background='#e9ecef';"
              onmouseout="this.style.background='';"
            >
              <td style="padding: 1rem; text-align: center">
                {{ booking.session.name }}
              </td>
              <td style="padding: 1rem; text-align: center">
                {{ booking.session.starttime }}
              </td>
              <td style="padding: 1rem; text-align: center">
                {{ booking.session.endtime }}
              </td>
              <td style="padding: 1rem; text-align: center">
                {{ booking.session.trainer }}
              </td>
              <td style="padding: 1rem; text-align: center">
                {{ booking.booking_date }}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <p
        class="text-center text-muted"
        style="font-size: 1.2rem; font-style: italic"
      >
        You have not booked any sessions yet.
      </p>
      {% endif %}
    </div>
  </section>
</main>

{% endblock %}
